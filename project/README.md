# Whales Secret Audit

## Безопасность и управление секретами

### Управление переменными окружения

В этом проекте используется стандартный подход Angular для управления переменными окружения:

1. **Файлы окружения**:
   - `src/environments/environment.ts` - для разработки
   - `src/environments/environment.prod.ts` - для продакшена

2. **Скрытие секретов**:
   - Конфигурация Firebase хранится в файлах окружения
   - Файлы `.env` добавлены в `.gitignore` и не попадают в репозиторий
   - Для локальной разработки создайте файл `.env` на основе `.env.example`

3. **Рекомендации по безопасности**:
   - Никогда не коммитьте настоящие секреты в репозиторий
   - Используйте переменные окружения сервера для продакшена
   - Регулярно обновляйте секреты и ключи API
   - Используйте Firebase Security Rules для защиты данных

### Локальная установка

1. Скопируйте `.env.example` в `.env`:
   ```bash
   cp .env.example .env
   ```

2. Заполните переменные в `.env` реальными значениями

3. Запустите приложение:
   ```bash
   npm start
   ```

### Сборка для продакшена

Для продакшена используйте переменные окружения сервера, а не файлы окружения Angular.

### Деплой на GitHub Pages

Для корректной работы SPA на GitHub Pages были внесены следующие изменения:

1. Добавлен файл `public/404.html` для перенаправления всех маршрутов обратно в приложение
2. Добавлен файл `public/index.html` для обработки параметров редиректа
3. Изменен base href в `src/index.html` на `/`
4. Добавлен скрипт деплоя в `package.json`:

```bash
npm run deploy
```

Этот скрипт автоматически собирает приложение с правильным base href (`/mws/`) и деплоит его в репозиторий.

Для корректной работы приложения на GitHub Pages используется библиотека [spa-github-pages](https://github.com/rafrex/spa-github-pages), которая преобразует пути в параметры запроса и обратно.
