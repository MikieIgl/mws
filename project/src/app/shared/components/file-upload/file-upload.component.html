<div class="file-upload-container">
  <div class="upload-card">
    <h2 class="upload-title">Загрузите ваши файлы</h2>
    <p class="upload-description">
      Поддерживаются форматы JSON и SARIF. Можно выбрать несколько файлов.
    </p>

    <div class="file-input-container">
      <label for="fileInput" class="file-input-label">
        <div class="file-input-content">
          <svg
            class="upload-icon"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M17 8L12 3L7 8"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M12 3V15"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <span class="file-input-text">
            {{
              selectedFiles.length > 0
                ? selectedFiles.length + ' файлов выбрано'
                : 'Выберите файлы'
            }}
          </span>
        </div>
      </label>
      <input
        id="fileInput"
        type="file"
        (change)="onFileSelected($event)"
        accept=".json,.sarif,application/json"
        class="file-input-hidden"
        multiple
      />
    </div>

    <div class="files-info" *ngIf="selectedFiles.length > 0">
      <h3 class="files-info-title">Выбранные файлы:</h3>
      <div class="file-list">
        <div
          class="file-item"
          *ngFor="let file of selectedFiles; let i = index"
        >
          <span class="file-number">{{ i + 1 }}.</span>
          <span class="file-name">{{ file.name }}</span>
          <span class="file-size"
            >({{ (file.size / 1024).toFixed(2) }} KB)</span
          >
        </div>
      </div>
    </div>

    <div class="status-message" *ngIf="uploadError" role="alert">
      <p class="error-message">{{ errorMessage }}</p>
    </div>

    <div class="status-message" *ngIf="uploadSuccess" role="status">
      <p class="success-message">Файлы успешно загружены!</p>
    </div>

    <div class="upload-progress" *ngIf="isUploading">
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
      <p class="progress-text">Объединение и загрузка файлов...</p>
    </div>

    <div class="action-buttons">
      <button
        class="upload-button"
        (click)="uploadFile()"
        [disabled]="selectedFiles.length === 0 || isUploading"
        [class.disabled]="selectedFiles.length === 0 || isUploading"
      >
        {{ isUploading ? 'Загрузка...' : 'Загрузить файлы' }}
      </button>

      <button
        class="reset-button"
        (click)="resetForm()"
        *ngIf="selectedFiles.length > 0 || uploadSuccess || uploadError"
      >
        Сбросить
      </button>
    </div>
  </div>
</div>
